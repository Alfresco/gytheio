# Build
The `gytheio` project uses _GitHub Actions CI_. \
The `ci.yml` config file can be found in the `.github/workflows` directory.


## Stages and Jobs
1. **Build**:  Java Build with Unit Tests, WhiteSource
3. **Release**: Publish to Nexus


## Branches
GitHub Actions CI builds differ by branch:
* `master` / `SP/*` / `HF/*` branches:
  - regular builds which include the _Build_ stage;
  - if the commit message contains the `[release]` tag, the builds will also 
  include the _Release_ stage;
`feature/*` / `ACS-*` branches:
  - regular builds which include only the _Build_ stage.

All other branches are ignored.


## Release process steps & info
Prerequisites:
 - the `master` / `SP/*` / `HF/*` branch is green and it contains all the changes that should be 
 included in the next release.

Steps:
1. Create a new branch with the name `feature/**-{release_version}` from the `master` / `SP/*`/ `HF/*` 
branch.
2. Update the project version if the current POM version is not the next desired release; use a
maven command, i.e.
    ```bash
    mvn versions:set -DnewVersion=#.##.#-SNAPSHOT versions:commit
    ```
3. Update the project's dependencies (remove the `-SNAPSHOT` suffixes - only for dependencies, not
 for the local project version).
4. Create a new commit with the `[release]` tag in its message. If no local changes have 
been generated by steps (2) and (3), then an empty commit should be created - e.g.
     ```bash
     git commit --allow-empty -m "Release #.##.# [release]"
     ```
 
     > The location of the `[release]` tag in the commit message is irrelevant.

     > If for any reason your PR contains multiple commits, the commit with the `[release]`
     tag should be the last (newest) one. 
5. Open a new Pull Request from the `feature/**-{release_version}` branch into the original
`master` / `SP/*` / `HF/*` branch and wait for a green build;
6. Once it is approved, merge the PR, preferably through the **Rebase and merge** option. If the 
**Create a merge commit** (_Merge pull request_) or **Squash and merge** options are used, you 
need to ensure that the _commit message_ contains the `[release]` tag (sub-string).


